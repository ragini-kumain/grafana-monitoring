# filename: telegraf.conf
# This is the main configuration file for the Telegraf agent.

[agent]
  # Default data collection interval
  interval = "30s"
  # Default data write interval
  flush_interval = "30s"

#===============================================================================
# OUTPUT PLUGINS
# This section defines where Telegraf sends the data it collects.
#===============================================================================

[[outputs.influxdb_v2]]
  # The URLs of your InfluxDB instance. "influxdb" is the container name from docker-compose.
  urls = ["http://influxdb:8086"]
  
  # InfluxDB v2 authentication token.
  # IMPORTANT: Replace with your actual InfluxDB token if it's different.
  token = "2jawDJw6S4yVkuyaKRL4b5nrkz4m1CSji94K6wbpPpANNpWMcEV_wVkyIeBDvHd1t3kNKjoKJYY-xwyHXtioQw=="
  
  # InfluxDB v2 organization name.
  organization = "my-org"
  
  # InfluxDB v2 bucket to write to.
  bucket = "my-bucket"

#===============================================================================
# INPUT PLUGINS
# This section defines what data Telegraf should collect.
#===============================================================================

[[inputs.snmp]]
  # A list of SNMP agent addresses to poll.
  # We will use placeholder IPs for now. You will change these to your real switch IPs.
  agents = ["192.168.1.1", "192.168.1.2"]
  
  # SNMP version to use.
  version = 2
  
  # SNMP community string.
  community = "public"
  
  # The measurement name that will be created in InfluxDB.
  name = "ruckus_switch"
  
  # Below is a list of OIDs that Telegraf will query from the switches.
  # Each OID is mapped to a field name in the InfluxDB measurement.
  
  # System Information
  [[inputs.snmp.field]]
    name = "sys_description"
    oid = "1.3.6.1.2.1.1.1.0"

  [[inputs.snmp.field]]
    name = "sys_uptime"
    oid = "1.3.6.1.2.1.1.3.0"

  # Chassis Health
  [[inputs.snmp.field]]
    name = "cpu_utilization"
    oid = "1.3.6.1.4.1.1991.1.1.2.1.35.0"
    
  [[inputs.snmp.field]]
    name = "memory_utilization"
    oid = "1.3.6.1.4.1.1991.1.1.2.1.51.0"
    
  # You can add more [[inputs.snmp.field]] blocks here for things like
  # interface traffic, errors, etc., once you identify their OIDs.